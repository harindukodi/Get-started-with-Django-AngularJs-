var app = angular.module('myApp', ["ngRoute"]);


app.factory('Data', function () {
    var data =
        {
            FirstName: '',
            Plot_amplitude:''

        };

    return {

         getPlot_amplitude: function () {
            return data.Plot_amplitude;
        },
        setPlot_amplitude: function (amplitude) {
            data.Plot_amplitude = amplitude;
        },

        getFirstName: function () {
            return data.FirstName;
        },
        setFirstName: function (firstName) {
            data.FirstName = firstName;
        }
    };
});

app.controller('FirstCtrl', function ($scope, Data) {

    $scope.firstName = '2';
    console.log($scope.firstName)
    $scope.$watch('firstName', function (newValue, oldValue) {
        if (newValue !== oldValue) Data.setFirstName(newValue);
    });
});

app.controller('SecondCtrl', function ($scope, Data) {

    $scope.$watch(function () {
        return Data.getFirstName();
    }, function (newValue, oldValue) {
        if (newValue !== oldValue) $scope.firstName = newValue;
    });
});



app.controller('Controller_get_amplitude', function ($scope, Data) {
    $scope.amplitude=2
    $scope.$watch('amplitude',function (newValue, oldValue) {
        if (newValue !== oldValue) Data.setPlot_amplitude(newValue);
    });
});

app.controller('plotting_controler', function ($scope, Data) {
    var amplitude_=0
    var frquency=0
    $scope.frequency_slider=2
    console.log($scope.amplitude_slider)
    $scope.$watch(function () {
        return Data.getPlot_amplitude();
    }, function (newValue, oldValue) {
        if (newValue !== oldValue) $scope.amplitude = newValue;

        amplitude_ =Number(newValue)

        var array=[];
        var index=[];
        var pi=3.14159
        for(let i=0;i<frquency;i=i+0.01){
           var out=amplitude_*Math.sin(2*pi*i)
            array.push(out);
          index.push(i);
       }

        var sin_trace={
            x:index,
            y:array,
            type:'scatter'
        }

        var data = [sin_trace];

        $scope.plot_ = Plotly.newPlot('myDiv', data);


    });

    $scope.$watch('frequency_slider',function (newValue, oldValue) {
        $scope.frequency_slider=newValue
        console.log(newValue)

        frquency=newValue

        var array=[];
        var index=[];
        var pi=3.14159
        for(let i=0;i<frquency;i=i+0.01){
           var out=amplitude_*Math.sin(2*pi*i)
            array.push(out);
          index.push(i);
       }

        var sin_trace={
            x:index,
            y:array,
            type:'scatter'
        }

        var data = [sin_trace];

        $scope.plot_ = Plotly.newPlot('myDiv', data);

    });


});



app.controller("list", function($scope) {
    $scope.products = ["Milk", "Bread", "Cheese"];
    $scope.addItem = function () {
        $scope.products.push($scope.addMe);
    }
});


app.config(function($routeProvider) {
    $routeProvider
    .when("/", {
        template : "<h1>Main</h1><p>Click on the links to change this content</p>"
    })
    .when("/banana", {
        template : "<h1>Banana</h1><p>Bananas contain around 75% water.</p>"
    })
    .when("/tomato", {
        template : "<h1>Tomato</h1><p>Tomatoes contain around 95% water.</p>"
    });
});